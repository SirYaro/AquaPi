<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4.2. Demon</title><link rel="stylesheet" type="text/css" href="static/aquapi.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="Komputer akwariowy AquaPi" /><link rel="up" href="devel.html" title="Rozdział 4. Dla developerów" /><link rel="prev" href="devel.html" title="Rozdział 4. Dla developerów" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.2. Demon</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="devel.html">Poprzedni</a> </td><th width="60%" align="center">Rozdział 4. Dla developerów</th><td width="20%" align="right"> </td></tr></table><hr /></div><div class="sect1" title="4.2. Demon"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="daemon"></a>4.2. Demon</h2></div></div></div><p>Stałe demona:</p><pre class="programlisting">
//prefiksy portów wejściowych
const char *PORT_RELBRD_PREFIX = "relbrd:";
const char *PORT_RPI_GPIO_PREFIX = "rpi:gpio:";
const char *PORT_DUMMY_PREFIX = "dummy:";

//prefiksy portów wyjściowych
const char *INPUT_RPI_1W_PREFIX = "rpi:1w:";
const char *INPUT_DUMMY_PREFIX = "dummy:";

const int E_DEV  = -1;
const int E_INFO = 0;
const int E_WARN = 1;
const int E_CRIT = 2;
const int E_SQL  = 3;

// typ urządzenia
const int DEV_INPUT = 1;
const int DEV_OUTPUT = 2;

// typ triggera
const int TRIGGER_TIME = 1;
const int TRIGGER_SENSOR = 2;

// kierunek triggera
const int DIRECTION_BIGGER = 1;
const int DIRECTION_SMALLER = 2;
</pre><p>Definicje struktur:</p><pre class="programlisting">
struct _interfaces {
	int id;
	char address[30];
	char name[30];
	int type;
	int state;
	int new_state;
	int draw;
	double correction;
	double measured_value;
	int override_value;
	int override_expire;
} interfaces[100];

int interfaces_count;

struct _timers {
	int type;
	int timeif;
	int action;
	int interfaceidthen;
	int direction;
	int interfaceidif;
	double value;
	char days[7]; 
} timers[100];

int timers_count;	

typedef struct
{
	char* db_host;
	char* db_user; 
	char* db_password;
	char* db_database;
	int dontfork;
	int stat_freq;
	int temp_freq;
	int devel_freq;
	double dummy_temp_sensor_val;
} configuration;
</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="devel.html">Poprzedni</a> </td><td width="20%" align="center"><a accesskey="u" href="devel.html">Początek rozdziału</a></td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">Rozdział 4. Dla developerów </td><td width="20%" align="center"><a accesskey="h" href="index.html">Spis treści</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
