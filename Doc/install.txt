Instalacja "szybka"

Możesz mnie poprosić o ostatni obraz AquaPi jaki posiadam. Ten obraz (o ile będzie stabilny) powinien zawierać już 
skonfigurowaną i działającą wersję AquaPi. Taki obraz wystarczy zgrać na kartę, uruchomić system, skonfigurować pod
swoje potrzeby (przez przeglądarkę) i cieszyć się działającym systemem.

Instalacja od początku

1. Ściągnąć najnowszą wersję rapsbiana, zainstalować i ustawić podstawowy system.

2. Włączyć obsługę 1-wire (obsługa sensora temperatury), czyli do /etc/modules dopisać

w1-gpio
w1-therm

3. Zainstalować następujące pakiety:

mysql-server
mysql-client
libmysqlclient-dev
lighttpd
php5-cgi
php5-mysql

(uwaga przy instalacji mysql-server system poprosi o nadanie hasła dla administratora mysql)

4. Skonfigurować serwer www i php

To enable PHP5 in Lighttpd, we must modify two files, /etc/php5/cgi/php.ini and 
/etc/lighttpd/lighttpd.conf. First we open /etc/php5/cgi/php.ini and add the line cgi.fix_pathinfo = 1 
right at the end of the file:

Then we open /etc/lighttpd/lighttpd.conf and add "mod_fastcgi", to the server.modules stanza: 

and then right at the end of the file, we add the following stanza:
fastcgi.server = ( ".php" => ((
                     "bin-path" => "/usr/bin/php5-cgi",
                     "socket" => "/tmp/php.socket"
                 )))

Then we restart Lighttpd:

/etc/init.d/lighttpd restart

5. Skonfigurować mysqla

wchodzimy w mysql monitor:

mysql -u root -p

(i podajemy hasło administratora które ustawiliśmy przy instalacji pakietu)

tworzymy użytkownika, bazę i tabele:

CREATE DATABASE IF NOT EXISTS `aquapi`;
ALTER DATABASE `aquapi` DEFAULT CHARACTER SET utf8 COLLATE utf8_polish_ci;
CREATE USER 'aquapi'@'localhost' IDENTIFIED BY 'aquapi';
GRANT ALL PRIVILEGES ON `aquapi`.* TO 'aquapi';
USE aquapi;

a potem tworzymy tabele najlepiej posiłkująć się plikiem Software/aquapi.sql
(najlepiej go zaimportować do mysqla)

6. Skompilować daemona

Skopiować pliki zawierające daemona do /usr/local/aquapi/

6.1 Zainstalować WiringPi

wchodzimy do katalogu daemon/wiringPi/wiringPi i odpalamy:

make clean
make all
make install

6.2 Skompilować daemona

Wchodzimy do katalogu daemon i odpalamy make

po kompilacji daemona można uruchomić przez ./aquapi

7. Dodać skrypty do RC aby odpalać daemona przy starcie

skopiować aquapi.rc do /etc/rc.d/ a następnie uruchomić

update-rc.d aquapi.rc defaults

8. Skopiować pliki zawierające WebUI do /var/www/

9. Stworzyć plik /etc/aquapi.ini o zawartości:

[database]
host = "localhost"
user = "aquapi"
password = "aquapi"
database = "aquapi"
